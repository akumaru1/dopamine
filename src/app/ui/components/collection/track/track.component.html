<div class="d-flex flex-column">
    <div class="d-flex flex-column mt-3 mb-1" *ngIf="this.canShowHeader && track.showHeader">
        <div class="app-track__header d-flex flex-row align-items-flex-start">
            <img
                *ngIf="albumArtworkPath"
                class="app-track__header-album-cover"
                [attr.src]="albumArtworkPath | imageToFilePath"
                [alt]="track.albumTitle"
                loading="lazy"
                draggable="false"
            />
            <div *ngIf="!albumArtworkPath" class="app-track__header-album-cover-placeholder"></div>
            <div class="flex-1">
                <div class="largest pb-2 ellipsis" *ngIf="!(track.discNumber > 0 && track.discCount > 1)" matTooltip="{{ track.albumTitle }}">
                    {{ track.albumTitle }}
                </div>
                <div
                    class="largest pb-2 ellipsis"
                    *ngIf="track.discNumber > 0 && track.discCount > 1"
                    matTooltip="{{ track.albumTitle }} ({{ track.discNumber }}/{{ track.discCount }})"
                >
                    {{ track.albumTitle }} ({{ track.discNumber }}/{{ track.discCount }})
                </div>
                <div class="secondary-text ellipsis" matTooltip="{{ track.albumArtists }}">
                    {{ track.albumArtists }}
                </div>
            </div>
        </div>
    </div>
    <div
        class="app-track__body px-1"
        [ngClass]="{ 'selected-item-background-important': track.isSelected }"
        matRipple
        [matRippleTrigger]="trigger"
        #trigger
    >
        <div class="app-track__left" [ngClass]="{ 'app-track__left--playlist': isPlaylistView }">
            <div *ngIf="!isPlaylistView" class="secondary-text">
                {{ track.number | formatTrackNumber }}
            </div>
            <img
                *ngIf="isPlaylistView && albumArtworkPath"
                class="app-track__album-cover"
                [attr.src]="albumArtworkPath | imageToFilePath"
                [alt]="track.albumTitle"
                loading="lazy"
                draggable="false"
            />
            <div *ngIf="isPlaylistView && !albumArtworkPath" class="app-track__album-cover-placeholder"></div>
        </div>
        <div class="app-track__right">
            <div class="app-track__top">
                <span class="app-track__top__title ellipsis" [ngClass]="{ 'accent-color': track.isPlaying }">{{ track.title }}</span>
                <div class="app-track__playback__and__duration">
                    <app-playback-indicator *ngIf="track.isPlaying" class="mx-2" [isSelected]="track.isSelected"></app-playback-indicator>
                    <div [ngClass]="{ 'accent-color': track.isPlaying }">
                        {{ track.durationInMilliseconds | formatTrackDuration }}
                    </div>
                </div>
            </div>
            <div class="app-track__bottom">
                <span class="ellipsis secondary-text smaller">{{ track.artists }}</span>
                <span></span>
                <div class="d-flex flex-row align-items-center justify-content-center red">
                    <app-rating class="app-track__rating" [track]="track" *ngIf="this.settings.showRating"></app-rating>
                    <app-love class="app-track__love ml-2" [track]="track" *ngIf="this.settings.showLove"></app-love>
                </div>
            </div>
        </div>
    </div>
</div>
